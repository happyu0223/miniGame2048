<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–—åœ°ä¸»æ¸¸æˆ - å…¨æ–°ç‰ˆæœ¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0066cc',
                        secondary: '#004499',
                        accent: '#ff6b00',
                        dark: '#0a192f',
                        light: '#f8f9fa'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'card-fly': 'cardFly 0.3s ease-out',
                        'card-shake': 'cardShake 0.3s ease-in-out',
                        'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate'
                    },
                    keyframes: {
                        cardFly: {
                            '0%': { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                            '100%': { transform: 'translate(var(--x), var(--y)) scale(0.8)', opacity: 1 }
                        },
                        cardShake: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 5px rgba(255, 215, 0, 0.5)' },
                            '100%': { boxShadow: '0 0 20px rgba(255, 215, 0, 0.8)' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .glass {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }
            .card-hover {
                transition: all 0.2s ease;
            }
            .card-hover:hover {
                transform: translateY(-10px) scale(1.05);
                z-index: 10;
            }
            .player-highlight {
                border: 3px solid #ffd700;
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            }
            .card-stack {
                position: relative;
                width: 60px;
                height: 84px;
                margin: 0 auto;
            }
            .card-stack .card {
                position: absolute;
                top: 0;
                left: 0;
                transition: all 0.1s ease;
            }
            .card-stack .card:nth-child(1) { transform: translate(0, 0) rotate(0deg); }
            .card-stack .card:nth-child(2) { transform: translate(2px, 2px) rotate(1deg); }
            .card-stack .card:nth-child(3) { transform: translate(4px, 4px) rotate(2deg); }
            .card-stack .card:nth-child(4) { transform: translate(6px, 6px) rotate(3deg); }
            .card-stack .card:nth-child(5) { transform: translate(8px, 8px) rotate(4deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-dark to-primary min-h-screen flex flex-col">
    <!-- æ¸¸æˆæ ‡é¢˜ -->
    <header class="py-4 text-center">
        <h1 class="text-4xl font-bold text-white text-shadow">æ–—åœ°ä¸»æ¸¸æˆ</h1>
        <p class="text-light mt-2">å…¨æ–°ç‰ˆæœ¬ - æµç•…åŠ¨ç”»ä½“éªŒ</p>
    </header>

    <!-- æ¸¸æˆä¸»å®¹å™¨ -->
    <main class="flex-1 flex flex-col md:flex-row gap-4 p-4">
        <!-- æ¸¸æˆåŒºåŸŸ -->
        <div class="flex-1 bg-dark/50 rounded-2xl p-4 glass relative">
            <!-- é¡¶éƒ¨ç©å®¶ (ä¸Šå®¶) -->
            <div class="player-area mb-8" id="topPlayer">
                <div class="player-info text-center mb-2">
                    <span class="text-white font-semibold" id="topPlayerName">ä¸Šå®¶</span>
                    <span class="ml-2 text-yellow-400" id="topPlayerStatus"></span>
                </div>
                <div class="player-cards flex justify-center" id="topPlayerCards">
                    <!-- å¡ç‰Œå°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="current-cards mt-2 flex justify-center" id="topPlayerCurrentCards">
                    <!-- å½“å‰å‡ºç‰Œ -->
                </div>
            </div>

            <!-- ä¸­é—´åŒºåŸŸ -->
            <div class="middle-area flex flex-col items-center my-4">
                <!-- ç‰Œå åŒºåŸŸ -->
                <div class="card-stack mb-6" id="cardStack">
                    <div class="card card-back"></div>
                    <div class="card card-back"></div>
                    <div class="card card-back"></div>
                    <div class="card card-back"></div>
                    <div class="card card-back"></div>
                </div>
                
                <!-- åº•ç‰ŒåŒºåŸŸ -->
                <div class="bottom-cards flex gap-2 mb-6" id="bottomCards">
                    <div class="card card-back bottom-card" id="bottomCard0"></div>
                    <div class="card card-back bottom-card" id="bottomCard1"></div>
                    <div class="card card-back bottom-card" id="bottomCard2"></div>
                </div>
                
                <!-- æ¸¸æˆçŠ¶æ€ -->
                <div class="game-status text-center">
                    <p class="text-white text-xl font-semibold" id="gameStatus">å‡†å¤‡å¼€å§‹æ¸¸æˆ</p>
                </div>
            </div>

            <!-- å·¦ä¾§ç©å®¶ (å·¦å®¶) -->
            <div class="player-area flex items-center mb-8" id="leftPlayer">
                <div class="player-info mr-4">
                    <span class="text-white font-semibold" id="leftPlayerName">å·¦å®¶</span>
                    <span class="ml-2 text-yellow-400" id="leftPlayerStatus"></span>
                </div>
                <div class="player-cards flex flex-col gap-1" id="leftPlayerCards">
                    <!-- å¡ç‰Œå°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="current-cards ml-4 flex flex-col gap-1" id="leftPlayerCurrentCards">
                    <!-- å½“å‰å‡ºç‰Œ -->
                </div>
            </div>

            <!-- åº•éƒ¨ç©å®¶ (è‡ªå·±) -->
            <div class="player-area mt-auto" id="bottomPlayer">
                <div class="player-info text-center mb-2">
                    <span class="text-white font-semibold" id="bottomPlayerName">æˆ‘</span>
                    <span class="ml-2 text-yellow-400" id="bottomPlayerStatus"></span>
                </div>
                <div class="player-cards flex justify-center flex-wrap gap-1" id="bottomPlayerCards">
                    <!-- å¡ç‰Œå°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="current-cards mt-2 flex justify-center" id="bottomPlayerCurrentCards">
                    <!-- å½“å‰å‡ºç‰Œ -->
                </div>
                <!-- æ“ä½œæŒ‰é’® -->
                <div class="action-buttons flex justify-center mt-4 gap-4" id="actionButtons">
                    <button id="startGameBtn" class="bg-accent hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-bold transition-all duration-300 transform hover:scale-105 shadow-lg">
                        å¼€å§‹æ¸¸æˆ
                    </button>
                </div>
            </div>
        </div>

        <!-- ä¿¡æ¯é¢æ¿ -->
        <div class="w-full md:w-64 bg-dark/50 rounded-2xl p-4 glass">
            <h3 class="text-xl font-bold text-white mb-4">æ¸¸æˆä¿¡æ¯</h3>
            
            <!-- ç©å®¶ä¿¡æ¯ -->
            <div class="mb-6">
                <h4 class="text-lg font-semibold text-light mb-2">ç©å®¶</h4>
                <div class="space-y-2">
                    <div class="flex items-center justify-between">
                        <span class="text-white">æˆ‘</span>
                        <span class="text-yellow-400" id="humanCardsCount">0å¼ </span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-white">å·¦å®¶</span>
                        <span class="text-yellow-400" id="leftCardsCount">0å¼ </span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-white">ä¸Šå®¶</span>
                        <span class="text-yellow-400" id="topCardsCount">0å¼ </span>
                    </div>
                </div>
            </div>
            
            <!-- æ¸¸æˆç»Ÿè®¡ -->
            <div>
                <h4 class="text-lg font-semibold text-light mb-2">ç»Ÿè®¡</h4>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-white">æ€»å±€æ•°</span>
                        <span class="text-yellow-400" id="totalGames">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-white">è·èƒœæ¬¡æ•°</span>
                        <span class="text-yellow-400" id="wins">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-white">èƒœç‡</span>
                        <span class="text-yellow-400" id="winRate">0%</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // æ¸¸æˆç±»
        class DoudizhuGame {
            constructor() {
                this.players = ['left', 'top', 'bottom']; // ç©å®¶é¡ºåºï¼šå·¦å®¶ -> ä¸Šå®¶ -> è‡ªå·±
                this.playerNames = {
                    left: 'å·¦å®¶',
                    top: 'ä¸Šå®¶',
                    bottom: 'æˆ‘'
                };
                
                // æ¸¸æˆæ•°æ®
                this.deck = []; // ç‰Œå †
                this.playerCards = { left: [], top: [], bottom: [] }; // ç©å®¶æ‰‹ç‰Œ
                this.bottomCards = []; // åº•ç‰Œ
                this.currentCards = null; // å½“å‰å‡ºç‰Œ
                this.currentCardsPlayer = null; // å½“å‰å‡ºç‰Œç©å®¶
                this.selectedCards = []; // é€‰ä¸­çš„ç‰Œ
                this.landlord = null; // åœ°ä¸»
                this.turnIndex = 0; // å›åˆç´¢å¼•
                this.currentPlayer = null; // å½“å‰ç©å®¶
                this.passCount = 0; // è·³è¿‡æ¬¡æ•°
                this.gamePhase = 'ready'; // æ¸¸æˆé˜¶æ®µï¼šready, dealing, calling, playing, ended
                
                // æ¸¸æˆç»Ÿè®¡
                this.gameStats = {
                    totalGames: 0,
                    wins: 0,
                    gameTime: 0,
                    gameStartTime: null,
                    currentGameTime: 0,
                    timer: null
                };
                
                // å¡ç‰Œé…ç½®
                this.cardWidth = 50;
                this.cardHeight = 70;
                
                // åˆå§‹åŒ–
                this.initElements();
                this.bindEvents();
                this.initGame();
            }
            
            // åˆå§‹åŒ–DOMå…ƒç´ 
            initElements() {
                this.elements = {
                    // ç©å®¶åŒºåŸŸ
                    players: {
                        left: document.getElementById('leftPlayer'),
                        top: document.getElementById('topPlayer'),
                        bottom: document.getElementById('bottomPlayer')
                    },
                    playerCards: {
                        left: document.getElementById('leftPlayerCards'),
                        top: document.getElementById('topPlayerCards'),
                        bottom: document.getElementById('bottomPlayerCards')
                    },
                    playerCurrentCards: {
                        left: document.getElementById('leftPlayerCurrentCards'),
                        top: document.getElementById('topPlayerCurrentCards'),
                        bottom: document.getElementById('bottomPlayerCurrentCards')
                    },
                    playerStatus: {
                        left: document.getElementById('leftPlayerStatus'),
                        top: document.getElementById('topPlayerStatus'),
                        bottom: document.getElementById('bottomPlayerStatus')
                    },
                    
                    // æ¸¸æˆå…ƒç´ 
                    bottomCards: document.getElementById('bottomCards'),
                    cardStack: document.getElementById('cardStack'),
                    gameStatus: document.getElementById('gameStatus'),
                    actionButtons: document.getElementById('actionButtons'),
                    
                    // ç»Ÿè®¡å…ƒç´ 
                    humanCardsCount: document.getElementById('humanCardsCount'),
                    leftCardsCount: document.getElementById('leftCardsCount'),
                    topCardsCount: document.getElementById('topCardsCount'),
                    totalGames: document.getElementById('totalGames'),
                    wins: document.getElementById('wins'),
                    winRate: document.getElementById('winRate')
                };
            }
            
            // ç»‘å®šäº‹ä»¶
            bindEvents() {
                // å¼€å§‹æ¸¸æˆæŒ‰é’®
                document.getElementById('startGameBtn').addEventListener('click', () => {
                    this.startGame();
                });
                
                // çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°å¸ƒå±€
                window.addEventListener('resize', () => {
                    this.updateLayout();
                });
            }
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame() {
                this.updatePlayerInfo();
                this.updateStats();
                this.updateLayout();
            }
            
            // å¼€å§‹æ¸¸æˆ
            async startGame() {
                console.log('ğŸ® å¼€å§‹æ–°æ¸¸æˆ');
                
                // é‡ç½®æ¸¸æˆçŠ¶æ€
                this.resetGame();
                
                // ç”Ÿæˆç‰Œå †
                this.generateDeck();
                
                // æ´—ç‰Œ
                this.shuffleDeck();
                
                // éšè—åº•ç‰Œ
                this.elements.bottomCards.style.display = 'none';
                
                // æ˜¾ç¤ºç‰Œå 
                this.elements.cardStack.style.display = 'block';
                
                // æ›´æ–°çŠ¶æ€
                this.updateStatus('å‡†å¤‡å‘ç‰Œ...');
                
                // éšæœºé€‰æ‹©èµ·å§‹ç©å®¶
                const startPlayerIndex = Math.floor(Math.random() * 3);
                const startPlayer = this.players[startPlayerIndex];
                this.currentPlayer = startPlayer;
                
                console.log(`ğŸ¯ éšæœºé€‰æ‹©èµ·å§‹ç©å®¶: ${startPlayer} (${this.playerNames[startPlayer]})`);
                this.updateStatus(`ä»${this.playerNames[startPlayer]}å¼€å§‹å‘ç‰Œ`);
                
                // ç­‰å¾…ä¸€ä¼šå„¿å†å¼€å§‹å‘ç‰Œ
                await this.sleep(1000);
                
                // å¼€å§‹å‘ç‰Œ
                await this.dealCards();
                
                // å¼€å§‹å«åœ°ä¸»é˜¶æ®µ
                await this.startCallingPhase();
            }
            
            // é‡ç½®æ¸¸æˆ
            resetGame() {
                console.log('ğŸ”„ é‡ç½®æ¸¸æˆçŠ¶æ€');
                
                // æ¸…ç©ºç©å®¶ç‰Œ
                this.players.forEach(player => {
                    this.playerCards[player] = [];
                    this.elements.playerCards[player].innerHTML = '';
                    this.elements.playerCurrentCards[player].innerHTML = '';
                    this.hideStatus(player);
                });
                
                // é‡ç½®æ¸¸æˆæ•°æ®
                this.bottomCards = [];
                this.currentCards = null;
                this.currentCardsPlayer = null;
                this.selectedCards = [];
                this.landlord = null;
                this.turnIndex = 0;
                this.currentPlayer = this.players[0];
                this.passCount = 0;
                this.gamePhase = 'ready';
                
                // éšè—åº•ç‰Œ
                this.elements.bottomCards.style.display = 'none';
                for (let i = 0; i < 3; i++) {
                    const card = document.getElementById(`bottomCard${i}`);
                    card.className = 'card card-back bottom-card';
                }
                
                // æ˜¾ç¤ºç‰Œå 
                this.elements.cardStack.style.display = 'block';
                
                this.updatePreview();
                this.updatePlayerInfo();
            }
            
            // ç”Ÿæˆç‰Œå †
            generateDeck() {
                const suits = ['spades', 'hearts', 'clubs', 'diamonds'];
                const values = ['3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A', '2'];
                
                this.deck = [];
                
                // ç”Ÿæˆæ™®é€šç‰Œ
                suits.forEach(suit => {
                    values.forEach(value => {
                        this.deck.push({ suit, value });
                    });
                });
                
                // æ·»åŠ å¤§å°ç‹
                this.deck.push({ suit: 'joker', value: 'small' });
                this.deck.push({ suit: 'joker', value: 'big' });
                
                console.log('ğŸƒ ç”Ÿæˆç‰Œå †:', this.deck.length, 'å¼ ç‰Œ');
            }
            
            // æ´—ç‰Œ
            shuffleDeck() {
                for (let i = this.deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                }
                console.log('ğŸ”€ æ´—ç‰Œå®Œæˆ');
            }
            
            // å‘ç‰Œ
            async dealCards() {
                console.log('ğŸ“¤ å¼€å§‹å‘ç‰Œ');
                
                // ä¿ç•™3å¼ åº•ç‰Œ
                this.bottomCards = this.deck.splice(-3);
                console.log('ğŸƒ åº•ç‰Œæ•°é‡:', this.bottomCards.length);
                
                // ç¡®å®šå‘ç‰Œé¡ºåºï¼ˆä»éšæœºé€‰æ‹©çš„ç©å®¶å¼€å§‹ï¼‰
                const startPlayerIndex = this.players.indexOf(this.currentPlayer);
                const playerOrder = [];
                for (let i = 0; i < 3; i++) {
                    playerOrder.push(this.players[(startPlayerIndex + i) % 3]);
                }
                
                console.log('ğŸ“‹ å‘ç‰Œé¡ºåº:', playerOrder.map(p => this.playerNames[p]).join(' â†’ '));
                
                let playerIndex = 0;
                
                // å¿«é€Ÿå‘ç‰Œï¼ˆæ— åŠ¨ç”»ï¼Œç›´æ¥åˆ†é…ï¼‰
                const remainingCards = [...this.deck];
                this.deck = [];
                
                for (let i = 0; i < remainingCards.length; i++) {
                    const card = remainingCards[i];
                    const player = playerOrder[playerIndex];
                    this.playerCards[player].push(card);
                    
                    playerIndex = (playerIndex + 1) % 3;
                }
                
                // ç«‹å³æ˜¾ç¤ºæ‰€æœ‰ç©å®¶çš„ç‰Œ
                this.sortCards();
                this.showPlayerCards('bottom');
                this.showAICards('left');
                this.showAICards('top');
                
                console.log('ğŸ“Š å‘ç‰Œå®Œæˆ:');
                this.players.forEach(player => {
                    console.log(`- ${player}: ${this.playerCards[player].length}å¼ `);
                });
                
                // æ˜¾ç¤ºåº•ç‰Œï¼ˆå¸¦é£å‡ºåŠ¨ç”»ï¼‰
                await this.showBottomCardsWithAnimation();
                
                // ç‰Œå æ¶ˆå¤±
                this.elements.cardStack.style.display = 'none';
                
                this.updateStatus('å‘ç‰Œå®Œæˆï¼Œå‡†å¤‡å«åœ°ä¸»');
                this.updatePlayerInfo();
            }
            
            // æ˜¾ç¤ºåº•ç‰Œï¼ˆå¸¦é£å‡ºåŠ¨ç”»ï¼‰
            async showBottomCardsWithAnimation() {
                console.log('ğŸƒ æ˜¾ç¤ºåº•ç‰Œ');
                
                // æ˜¾ç¤ºåº•ç‰ŒåŒºåŸŸ
                this.elements.bottomCards.style.display = 'flex';
                
                // åº•ç‰Œé£å‡ºåŠ¨ç”»
                for (let i = 0; i < this.bottomCards.length; i++) {
                    const card = this.bottomCards[i];
                    const cardElement = document.getElementById(`bottomCard${i}`);
                    
                    // è®¾ç½®å¡ç‰Œæ ·å¼
                    this.setCardStyle(cardElement, card);
                    
                    // æ·»åŠ é£å‡ºåŠ¨ç”»
                    cardElement.style.animation = `cardFly 0.5s ease-out forwards`;
                    cardElement.style.setProperty('--x', '0px');
                    cardElement.style.setProperty('--y', '-20px');
                    
                    await this.sleep(100);
                }
                
                await this.sleep(500);
            }
            
            // ç†ç‰Œ
            sortCards() {
                const valueOrder = {
                    '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10,
                    'J': 11, 'Q': 12, 'K': 13, 'A': 14, '2': 15,
                    'small': 16, 'big': 17
                };
                
                this.players.forEach(player => {
                    this.playerCards[player].sort((a, b) => {
                        const valueDiff = valueOrder[b.value] - valueOrder[a.value];
                        if (valueDiff !== 0) return valueDiff;
                        
                        const suitOrder = { 'spades': 4, 'hearts': 3, 'clubs': 2, 'diamonds': 1, 'joker': 0 };
                        return suitOrder[b.suit] - suitOrder[a.suit];
                    });
                });
            }
            
            // æ˜¾ç¤ºç©å®¶æ‰‹ç‰Œ
            showPlayerCards(player) {
                const container = this.elements.playerCards[player];
                container.innerHTML = '';
                
                this.playerCards[player].forEach((card, index) => {
                    const cardElement = this.createCardElement(card);
                    
                    // åªæœ‰ç©å®¶è‡ªå·±çš„ç‰Œå¯ä»¥ç‚¹å‡»
                    if (player === 'bottom') {
                        cardElement.classList.add('card-hover', 'cursor-pointer');
                        cardElement.addEventListener('click', () => {
                            this.toggleCardSelection(index);
                        });
                    }
                    
                    container.appendChild(cardElement);
                });
            }
            
            // æ˜¾ç¤ºAIæ‰‹ç‰Œï¼ˆèƒŒé¢ï¼‰
            showAICards(player) {
                const container = this.elements.playerCards[player];
                container.innerHTML = '';
                
                const cardCount = this.playerCards[player].length;
                
                // ä¸ºAIç©å®¶æ˜¾ç¤ºèƒŒé¢æœä¸Šçš„ç‰Œ
                for (let i = 0; i < cardCount; i++) {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'card card-back';
                    
                    // å·¦ä¾§ç©å®¶çš„ç‰Œå‚ç›´æ’åˆ—
                    if (player === 'left') {
                        cardElement.style.marginBottom = '-50px';
                        cardElement.style.zIndex = cardCount - i;
                    } else {
                        cardElement.style.marginLeft = '-35px';
                        cardElement.style.zIndex = cardCount - i;
                    }
                    
                    container.appendChild(cardElement);
                }
            }
            
            // åˆ›å»ºå¡ç‰Œå…ƒç´ 
            createCardElement(card) {
                const cardElement = document.createElement('div');
                this.setCardStyle(cardElement, card);
                return cardElement;
            }
            
            // è®¾ç½®å¡ç‰Œæ ·å¼
            setCardStyle(element, card) {
                element.className = 'card';
                
                if (card.suit === 'joker') {
                    element.classList.add('joker');
                    element.textContent = card.value === 'big' ? 'ğŸƒ' : 'ğŸƒŸ';
                    element.style.backgroundColor = card.value === 'big' ? '#ffd700' : '#ffffff';
                    element.style.color = card.value === 'big' ? '#000000' : '#ff0000';
                } else {
                    const suitSymbols = {
                        'spades': 'â™ ',
                        'hearts': 'â™¥',
                        'clubs': 'â™£',
                        'diamonds': 'â™¦'
                    };
                    
                    element.classList.add(card.suit);
                    element.innerHTML = `
                        <div class="card-value">${card.value}</div>
                        <div class="card-suit">${suitSymbols[card.suit]}</div>
                    `;
                }
                
                element.style.width = this.cardWidth + 'px';
                element.style.height = this.cardHeight + 'px';
            }
            
            // å¼€å§‹å«åœ°ä¸»é˜¶æ®µ
            async startCallingPhase() {
                console.log('ğŸ¤´ å¼€å§‹å«åœ°ä¸»é˜¶æ®µ');
                this.gamePhase = 'calling';
                
                // ç¡®å®šå«åœ°ä¸»é¡ºåºï¼ˆä»å‘ç‰Œèµ·å§‹ç©å®¶å¼€å§‹ï¼‰
                const startPlayerIndex = this.players.indexOf(this.currentPlayer);
                const callingOrder = [];
                for (let i = 0; i < 3; i++) {
                    callingOrder.push(this.players[(startPlayerIndex + i) % 3]);
                }
                
                console.log('ğŸ“‹ å«åœ°ä¸»é¡ºåº:', callingOrder.map(p => this.playerNames[p]).join(' â†’ '));
                
                let hasCall = false;
                
                // æœ€å¤šä¸‰è½®å«åœ°ä¸»
                for (let round = 0; round < 3; round++) {
                    console.log(`\nğŸ”„ ç¬¬${round + 1}è½®å«åœ°ä¸»`);
                    
                    for (const player of callingOrder) {
                        if (hasCall && round > 0) break;
                        
                        console.log(`\nğŸ¯ å½“å‰ç©å®¶: ${player} (${this.playerNames[player]})`);
                        
                        // è®¾ç½®å½“å‰å›åˆç©å®¶
                        this.currentPlayer = player;
                        this.updateStatus(`${this.playerNames[player]}çš„å›åˆ`);
                        
                        // é«˜äº®å½“å‰ç©å®¶
                        this.highlightPlayer(player);
                        
                        // æ˜¾ç¤ºçŠ¶æ€æ–‡æœ¬
                        this.showStatus(player, 'è¯·å«åœ°ä¸»');
                        
                        // æ‰§è¡Œå«åœ°ä¸»æ“ä½œ
                        const called = await this.handlePlayerCall(player);
                        
                        // å–æ¶ˆé«˜äº®
                        this.unhighlightPlayer(player);
                        this.hideStatus(player);
                        
                        if (called) {
                            console.log('ğŸ‘‘', this.playerNames[player], 'æˆä¸ºåœ°ä¸»ï¼');
                            this.landlord = player;
                            hasCall = true;
                            
                            // åœ°ä¸»è·å¾—åº•ç‰Œ
                            this.playerCards[player] = [...this.playerCards[player], ...this.bottomCards];
                            this.sortCards();
                            
                            // é‡æ–°æ˜¾ç¤ºç©å®¶æ‰‹ç‰Œ
                            if (player === 'bottom') {
                                this.showPlayerCards(player);
                            } else {
                                this.showAICards(player);
                            }
                            
                            // æ˜¾ç¤ºåº•ç‰Œå†…å®¹
                            this.revealBottomCards();
                            
                            this.updateStatus(`${this.playerNames[player]}æˆä¸ºåœ°ä¸»ï¼`);
                            await this.sleep(2000);
                            
                            // å¼€å§‹å‡ºç‰Œé˜¶æ®µ
                            await this.startPlayingPhase();
                            return;
                        }
                    }
                }
                
                // å¦‚æœæ²¡æœ‰äººå«åœ°ä¸»ï¼Œé‡æ–°å¼€å§‹æ¸¸æˆ
                console.log('âŒ æ— äººå«åœ°ä¸»ï¼Œé‡æ–°å¼€å§‹');
                this.updateStatus('æ— äººå«åœ°ä¸»ï¼Œé‡æ–°å¼€å§‹');
                await this.sleep(2000);
                this.startGame();
            }
            
            // å¤„ç†ç©å®¶å«åœ°ä¸»
            async handlePlayerCall(player) {
                if (player === 'bottom') {
                    return await this.handleHumanCall();
                } else {
                    return await this.handleAICall(player);
                }
            }
            
            // å¤„ç†äººç±»å«åœ°ä¸»
            async handleHumanCall() {
                return new Promise((resolve) => {
                    // æ¸…ç©ºæŒ‰é’®å®¹å™¨
                    this.elements.actionButtons.innerHTML = '';
                    
                    // åˆ›å»ºå«åœ°ä¸»æŒ‰é’®
                    const callBtn = document.createElement('button');
                    callBtn.className = 'action-btn';
                    callBtn.textContent = 'å«åœ°ä¸»';
                    callBtn.style.cssText = `
                        background: linear-gradient(135deg, #ff6b00, #cc5500);
                        color: white;
                        border: 2px solid #ff6b00;
                        padding: 15px 30px;
                        font-size: 18px;
                        font-weight: bold;
                        border-radius: 10px;
                        cursor: pointer;
                        margin: 0 10px;
                        box-shadow: 0 6px 20px rgba(255, 107, 0, 0.6);
                        transition: all 0.3s ease;
                        z-index: 9999;
                        position: relative;
                    `;
                    callBtn.onclick = () => {
                        this.landlord = 'bottom';
                        this.showStatus('bottom', 'å«åœ°ä¸» âœ“');
                        resolve(true);
                    };
                    
                    // åˆ›å»ºä¸å«æŒ‰é’®
                    const passBtn = document.createElement('button');
                    passBtn.className = 'action-btn pass';
                    passBtn.textContent = 'ä¸å«';
                    passBtn.style.cssText = `
                        background: linear-gradient(135deg, #666, #999);
                        color: white;
                        border: 2px solid #666;
                        padding: 15px 30px;
                        font-size: 18px;
                        font-weight: bold;
                        border-radius: 10px;
                        cursor: pointer;
                        margin: 0 10px;
                        transition: all 0.3s ease;
                        z-index: 9999;
                        position: relative;
                    `;
                    passBtn.onclick = () => {
                        this.showStatus('bottom', 'ä¸å«');
                        resolve(false);
                    };
                    
                    // ç¡®ä¿æŒ‰é’®å®¹å™¨æ ·å¼æ­£ç¡®
                    this.elements.actionButtons.style.cssText = `
                        display: flex !important;
                        justify-content: center !important;
                        align-items: center !important;
                        gap: 15px !important;
                        margin: 15px 0 !important;
                        min-height: 60px !important;
                        position: relative !important;
                        z-index: 9999 !important;
                        background: rgba(0, 0, 0, 0.1) !important;
                        border-radius: 10px !important;
                        padding: 10px !important;
                    `;
                    
                    // æ·»åŠ æŒ‰é’®
                    this.elements.actionButtons.appendChild(callBtn);
                    this.elements.actionButtons.appendChild(passBtn);
                });
            }
            
            // å¤„ç†AIå«åœ°ä¸»
            async handleAICall(player) {
                // ç®€å•çš„AIå†³ç­–é€»è¾‘
                const cards = this.playerCards[player];
                let score = 0;
                
                // è®¡ç®—ç‰ŒåŠ›åˆ†æ•°
                cards.forEach(card => {
                    if (card.value === '2') score += 2;
                    else if (card.value === 'A') score += 1.5;
                    else if (card.value === 'K') score += 1;
                    else if (card.value === 'Q') score += 0.8;
                    else if (card.value === 'J') score += 0.6;
                    else if (card.value === '10') score += 0.5;
                    else if (card.suit === 'joker') score += 5;
                });
                
                // éšæœºå› ç´ 
                const randomFactor = Math.random() * 2;
                
                await this.sleep(1000);
                
                const willCall = score + randomFactor > 8;
                
                if (willCall) {
                    this.showStatus(player, 'å«åœ°ä¸» âœ“');
                } else {
                    this.showStatus(player, 'ä¸å«');
                }
                
                return willCall;
            }
            
            // æ˜¾ç¤ºåº•ç‰Œå†…å®¹
            revealBottomCards() {
                this.bottomCards.forEach((card, index) => {
                    const cardElement = document.getElementById(`bottomCard${index}`);
                    this.setCardStyle(cardElement, card);
                    cardElement.classList.add('animate-glow');
                });
            }
            
            // å¼€å§‹å‡ºç‰Œé˜¶æ®µ
            async startPlayingPhase() {
                console.log('ğŸ® å¼€å§‹å‡ºç‰Œé˜¶æ®µ');
                this.gamePhase = 'playing';
                
                // åœ°ä¸»å…ˆå‡ºç‰Œ
                this.currentPlayer = this.landlord;
                this.passCount = 0;
                this.currentCards = null;
                this.currentCardsPlayer = null;
                
                this.updateStatus(`${this.playerNames[this.currentPlayer]}çš„å›åˆ`);
                
                // æ¸¸æˆå¾ªç¯
                while (true) {
                    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
                    if (this.checkGameEnd()) {
                        break;
                    }
                    
                    // é«˜äº®å½“å‰ç©å®¶
                    this.highlightPlayer(this.currentPlayer);
                    
                    // æ‰§è¡Œå‡ºç‰Œæ“ä½œ
                    const action = await this.handlePlayerAction();
                    
                    // å–æ¶ˆé«˜äº®
                    this.unhighlightPlayer(this.currentPlayer);
                    
                    if (action.type === 'play') {
                        // ç©å®¶å‡ºç‰Œ
                        this.currentCards = action.cards;
                        this.currentCardsPlayer = this.currentPlayer;
                        this.passCount = 0;
                        
                        // æ˜¾ç¤ºå‡ºç‰Œ
                        this.showCurrentCards(this.currentPlayer, action.cards);
                        
                        // ä»ç©å®¶æ‰‹ç‰Œä¸­ç§»é™¤
                        action.cards.forEach(card => {
                            const index = this.playerCards[this.currentPlayer].findIndex(c => 
                                c.suit === card.suit && c.value === card.value
                            );
                            if (index > -1) {
                                this.playerCards[this.currentPlayer].splice(index, 1);
                            }
                        });
                        
                        // æ›´æ–°æ˜¾ç¤º
                        if (this.currentPlayer === 'bottom') {
                            this.showPlayerCards(this.currentPlayer);
                        } else {
                            this.showAICards(this.currentPlayer);
                        }
                        
                        this.updateStatus(`${this.playerNames[this.currentPlayer]}å‡ºç‰Œ`);
                    } else {
                        // ç©å®¶è·³è¿‡
                        this.passCount++;
                        this.showStatus(this.currentPlayer, 'è¦ä¸èµ·');
                        this.updateStatus(`${this.playerNames[this.currentPlayer]}è¦ä¸èµ·`);
                    }
                    
                    // æ£€æŸ¥æ˜¯å¦è¿›å…¥è‡ªç”±ç‰Œé˜¶æ®µ
                    if (this.passCount >= 2) {
                        console.log('ğŸ”„ è¿›å…¥è‡ªç”±ç‰Œé˜¶æ®µ');
                        this.currentCards = null;
                        this.currentCardsPlayer = null;
                        this.passCount = 0;
                        this.updateStatus('è‡ªç”±ç‰Œé˜¶æ®µ');
                        
                        // æ¸…é™¤å½“å‰å‡ºç‰Œæ˜¾ç¤º
                        this.clearCurrentCards();
                        
                        await this.sleep(1000);
                    }
                    
                    // ä¸‹ä¸€ä¸ªç©å®¶
                    this.nextPlayer();
                }
            }
            
            // å¤„ç†ç©å®¶æ“ä½œ
            async handlePlayerAction() {
                if (this.currentPlayer === 'bottom') {
                    return await this.handleHumanAction();
                } else {
                    return await this.handleAIAction();
                }
            }
            
            // å¤„ç†äººç±»æ“ä½œ
            async handleHumanAction() {
                return new Promise((resolve) => {
                    // æ¸…ç©ºæŒ‰é’®å®¹å™¨
                    this.elements.actionButtons.innerHTML = '';
                    
                    // åˆ›å»ºå‡ºç‰ŒæŒ‰é’®
                    const playBtn = document.createElement('button');
                    playBtn.className = 'action-btn';
                    playBtn.textContent = 'å‡ºç‰Œ';
                    playBtn.style.cssText = `
                        background: linear-gradient(135deg, #0066cc, #004499);
                        color: white;
                        border: 2px solid #0066cc;
                        padding: 12px 24px;
                        font-size: 16px;
                        font-weight: bold;
                        border-radius: 8px;
                        cursor: pointer;
                        margin: 0 5px;
                        transition: all 0.3s ease;
                    `;
                    playBtn.onclick = () => {
                        if (this.selectedCards.length > 0 && this.validateCards(this.selectedCards)) {
                            resolve({ type: 'play', cards: [...this.selectedCards] });
                            this.selectedCards = [];
                        }
                    };
                    
                    // åˆ›å»ºè¦ä¸èµ·æŒ‰é’®
                    const passBtn = document.createElement('button');
                    passBtn.className = 'action-btn pass';
                    passBtn.textContent = 'è¦ä¸èµ·';
                    passBtn.style.cssText = `
                        background: linear-gradient(135deg, #666, #999);
                        color: white;
                        border: 2px solid #666;
                        padding: 12px 24px;
                        font-size: 16px;
                        font-weight: bold;
                        border-radius: 8px;
                        cursor: pointer;
                        margin: 0 5px;
                        transition: all 0.3s ease;
                    `;
                    passBtn.onclick = () => {
                        resolve({ type: 'pass' });
                    };
                    
                    // ç¡®ä¿æŒ‰é’®å®¹å™¨æ ·å¼æ­£ç¡®
                    this.elements.actionButtons.style.cssText = `
                        display: flex !important;
                        justify-content: center !important;
                        align-items: center !important;
                        gap: 10px !important;
                        margin: 10px 0 !important;
                    `;
                    
                    // æ·»åŠ æŒ‰é’®
                    this.elements.actionButtons.appendChild(playBtn);
                    this.elements.actionButtons.appendChild(passBtn);
                });
            }
            
            // å¤„ç†AIæ“ä½œ
            async handleAIAction() {
                await this.sleep(1500);
                
                // ç®€å•çš„AIå‡ºç‰Œé€»è¾‘
                const cards = this.playerCards[this.currentPlayer];
                
                if (this.currentCards === null) {
                    // è‡ªç”±ç‰Œé˜¶æ®µï¼ŒAIå¯ä»¥å‡ºä»»æ„ç‰Œ
                    const bestCombo = this.findBestCombo(cards);
                    
                    if (bestCombo.length > 0) {
                        return { type: 'play', cards: bestCombo };
                    } else {
                        return { type: 'pass' };
                    }
                } else {
                    // æœ‰å½“å‰å‡ºç‰Œï¼ŒAIéœ€è¦å‡ºç‰Œ
                    const playableCards = this.findPlayableCards(cards, this.currentCards);
                    
                    if (playableCards.length > 0) {
                        return { type: 'play', cards: playableCards };
                    } else {
                        return { type: 'pass' };
                    }
                }
            }
            
            // æŸ¥æ‰¾æœ€ä½³å‡ºç‰Œç»„åˆï¼ˆç®€åŒ–ç‰ˆï¼‰
            findBestCombo(cards) {
                // è¿™é‡Œå®ç°ä¸€ä¸ªç®€å•çš„AIå‡ºç‰Œé€»è¾‘
                // å®é™…çš„æ–—åœ°ä¸»AIéœ€è¦æ›´å¤æ‚çš„ç®—æ³•
                
                // å°è¯•å‡ºå¯¹å­
                for (let i = 0; i < cards.length - 1; i++) {
                    if (cards[i].value === cards[i + 1].value) {
                        return [cards[i], cards[i + 1]];
                    }
                }
                
                // å°è¯•å‡ºå•ç‰Œï¼ˆæœ€å¤§çš„ï¼‰
                if (cards.length > 0) {
                    return [cards[0]];
                }
                
                return [];
            }
            
            // æŸ¥æ‰¾å¯å‡ºç‰Œï¼ˆç®€åŒ–ç‰ˆï¼‰
            findPlayableCards(cards, currentCards) {
                // ç®€åŒ–é€»è¾‘ï¼šå¦‚æœå½“å‰æ˜¯å•ç‰Œï¼Œå‡ºæ›´å¤§çš„å•ç‰Œ
                if (currentCards.length === 1) {
                    const currentValue = this.getValueRank(currentCards[0].value);
                    
                    for (const card of cards) {
                        if (this.getValueRank(card.value) > currentValue) {
                            return [card];
                        }
                    }
                }
                
                return [];
            }
            
            // è·å–ç‰Œå€¼å¤§å°
            getValueRank(value) {
                const ranks = {
                    '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10,
                    'J': 11, 'Q': 12, 'K': 13, 'A': 14, '2': 15,
                    'small': 16, 'big': 17
                };
                return ranks[value];
            }
            
            // éªŒè¯ç‰Œå‹
            validateCards(cards) {
                if (cards.length === 0) return false;
                
                // å¦‚æœæ˜¯è‡ªç”±ç‰Œé˜¶æ®µï¼Œä»»ä½•ç‰Œå‹éƒ½å¯ä»¥
                if (this.currentCards === null) {
                    return true;
                }
                
                // ç‰Œå‹å¿…é¡»ä¸€è‡´
                if (cards.length !== this.currentCards.length) {
                    return false;
                }
                
                // å•ç‰Œæ¯”è¾ƒ
                if (cards.length === 1) {
                    return this.getValueRank(cards[0].value) > this.getValueRank(this.currentCards[0].value);
                }
                
                // å¯¹å­æ¯”è¾ƒ
                if (cards.length === 2) {
                    if (cards[0].value !== cards[1].value) return false;
                    return this.getValueRank(cards[0].value) > this.getValueRank(this.currentCards[0].value);
                }
                
                return false;
            }
            
            // åˆ‡æ¢å¡ç‰Œé€‰æ‹©
            toggleCardSelection(index) {
                const card = this.playerCards['bottom'][index];
                const cardElement = this.elements.playerCards['bottom'].children[index];
                
                const selectedIndex = this.selectedCards.findIndex(c => 
                    c.suit === card.suit && c.value === card.value
                );
                
                if (selectedIndex > -1) {
                    // å–æ¶ˆé€‰æ‹©
                    this.selectedCards.splice(selectedIndex, 1);
                    cardElement.classList.remove('selected');
                    cardElement.style.transform = '';
                } else {
                    // é€‰æ‹©å¡ç‰Œ
                    this.selectedCards.push(card);
                    cardElement.classList.add('selected');
                    cardElement.style.transform = 'translateY(-10px)';
                }
            }
            
            // æ˜¾ç¤ºå½“å‰å‡ºç‰Œ
            showCurrentCards(player, cards) {
                const container = this.elements.playerCurrentCards[player];
                container.innerHTML = '';
                
                cards.forEach(card => {
                    const cardElement = this.createCardElement(card);
                    container.appendChild(cardElement);
                });
            }
            
            // æ¸…é™¤å½“å‰å‡ºç‰Œæ˜¾ç¤º
            clearCurrentCards() {
                this.players.forEach(player => {
                    this.elements.playerCurrentCards[player].innerHTML = '';
                });
            }
            
            // ä¸‹ä¸€ä¸ªç©å®¶
            nextPlayer() {
                const currentIndex = this.players.indexOf(this.currentPlayer);
                this.currentPlayer = this.players[(currentIndex + 1) % 3];
                this.updateStatus(`${this.playerNames[this.currentPlayer]}çš„å›åˆ`);
            }
            
            // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
            checkGameEnd() {
                for (const player of this.players) {
                    if (this.playerCards[player].length === 0) {
                        this.gameOver(player);
                        return true;
                    }
                }
                return false;
            }
            
            // æ¸¸æˆç»“æŸ
            async gameOver(winner) {
                console.log('ğŸ† æ¸¸æˆç»“æŸï¼Œè·èƒœè€…:', winner);
                
                const isHumanWin = winner === 'bottom';
                const winnerName = this.playerNames[winner];
                
                if (isHumanWin) {
                    this.gameStats.wins++;
                }
                this.gameStats.totalGames++;
                
                this.updateStats();
                
                this.updateStatus(`æ¸¸æˆç»“æŸï¼${winnerName}è·èƒœï¼`);
                
                // æ˜¾ç¤ºé‡æ–°å¼€å§‹æŒ‰é’®
                this.elements.actionButtons.innerHTML = '';
                const restartBtn = document.createElement('button');
                restartBtn.textContent = 'é‡æ–°å¼€å§‹';
                restartBtn.className = 'bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-300';
                restartBtn.onclick = () => this.startGame();
                this.elements.actionButtons.appendChild(restartBtn);
            }
            
            // é«˜äº®ç©å®¶
            highlightPlayer(player) {
                this.elements.players[player].classList.add('player-highlight');
            }
            
            // å–æ¶ˆé«˜äº®ç©å®¶
            unhighlightPlayer(player) {
                this.elements.players[player].classList.remove('player-highlight');
            }
            
            // æ˜¾ç¤ºç©å®¶çŠ¶æ€
            showStatus(player, text) {
                this.elements.playerStatus[player].textContent = text;
            }
            
            // éšè—ç©å®¶çŠ¶æ€
            hideStatus(player) {
                this.elements.playerStatus[player].textContent = '';
            }
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            updateStatus(text) {
                this.elements.gameStatus.textContent = text;
            }
            
            // æ›´æ–°ç©å®¶ä¿¡æ¯
            updatePlayerInfo() {
                this.elements.humanCardsCount.textContent = `${this.playerCards.bottom.length}å¼ `;
                this.elements.leftCardsCount.textContent = `${this.playerCards.left.length}å¼ `;
                this.elements.topCardsCount.textContent = `${this.playerCards.top.length}å¼ `;
            }
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats() {
                this.elements.totalGames.textContent = this.gameStats.totalGames;
                this.elements.wins.textContent = this.gameStats.wins;
                const winRate = this.gameStats.totalGames > 0 
                    ? Math.round((this.gameStats.wins / this.gameStats.totalGames) * 100) 
                    : 0;
                this.elements.winRate.textContent = `${winRate}%`;
            }
            
            // æ›´æ–°å¸ƒå±€
            updateLayout() {
                // æ ¹æ®å±å¹•å¤§å°è°ƒæ•´å¡ç‰Œå¤§å°
                const screenWidth = window.innerWidth;
                const screenHeight = window.innerHeight;
                
                if (screenWidth < 768) {
                    this.cardWidth = 40;
                    this.cardHeight = 56;
                } else {
                    this.cardWidth = 50;
                    this.cardHeight = 70;
                }
                
                // é‡æ–°æ˜¾ç¤ºå¡ç‰Œ
                if (this.gamePhase !== 'ready') {
                    this.showPlayerCards('bottom');
                    this.showAICards('left');
                    this.showAICards('top');
                }
            }
            
            // æ›´æ–°é¢„è§ˆ
            updatePreview() {
                // æ›´æ–°ç©å®¶ä¿¡æ¯æ˜¾ç¤º
                this.updatePlayerInfo();
            }
            
            // ç­‰å¾…å‡½æ•°
            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }
        
        // CSSæ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            .card {
                width: 50px;
                height: 70px;
                border-radius: 6px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                font-weight: bold;
                margin: 0 2px;
                position: relative;
                transition: all 0.2s ease;
            }
            
            .card-back {
                background: linear-gradient(135deg, #2c3e50, #34495e);
                border: 2px solid #ecf0f1;
                box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            }
            
            .card-back::after {
                content: 'ğŸ‚ ';
                font-size: 30px;
                color: #ecf0f1;
            }
            
            .card.spades, .card.clubs {
                color: #000000;
                background: #ffffff;
                border: 2px solid #000000;
            }
            
            .card.hearts, .card.diamonds {
                color: #ff0000;
                background: #ffffff;
                border: 2px solid #ff0000;
            }
            
            .card.joker {
                background: #ffd700;
                color: #000000;
                border: 2px solid #000000;
            }
            
            .card.joker.small {
                background: #ffffff;
                color: #ff0000;
                border: 2px solid #ff0000;
            }
            
            .card.selected {
                border-color: #ffd700 !important;
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            }
            
            .bottom-card {
                width: 45px;
                height: 63px;
                border-radius: 6px;
                border: 2px solid #ddd;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            }
            
            .action-buttons {
                display: flex;
                justify-content: center;
                gap: 10px;
                margin: 10px 0;
            }
            
            .action-btn {
                transition: all 0.3s ease;
            }
            
            .action-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            }
            
            .action-btn:active {
                transform: translateY(0);
            }
            
            .player-area {
                transition: all 0.3s ease;
            }
            
            .player-highlight {
                border: 3px solid #ffd700;
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
                border-radius: 10px;
                padding: 10px;
            }
        `;
        document.head.appendChild(style);
        
        // åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', () => {
            new DoudizhuGame();
        });
    </script>    
</body>
</html>
